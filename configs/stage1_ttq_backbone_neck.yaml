# Stage 1: TTQ Quantization of Backbone and Neck
# Excludes: Detection head and C2PSA attention blocks

# Stage metadata
stage:
  name: "stage1_ttq_backbone_neck"
  description: |
    Trained Ternary Quantization (TTQ) applied to backbone and neck layers.
    
    Quantized components:
    - All Conv2d layers in backbone
    - All Conv2d layers in neck
    
    Excluded components:
    - Detection head (model.23.*)
    - C2PSA attention blocks (model.10.*)
    - First conv layer (optional, for better accuracy)
    
    Quantization method:
    - Ternary weights: {-Wn, 0, +Wp}
    - Learnable scaling factors Wp and Wn
    - Threshold-based quantization (Δ = 0.05 × max(|w|))
  next_stage: "stage2_bitnet_c2psa"

# Model settings
model:
  name: "yolo11n.pt"
  threshold: 0.05
  quantize_first_layer: false

# Data settings
data:
  train: "coco.yaml"
  val: "coco.yaml"

# Training hyperparameters
train:
  epochs: 20
  batch: 16
  imgsz: 640
  device: "0"
  workers: 8
  
  optimizer: "Adam"
  lr0: 0.0001
  lrf: 0.01
  momentum: 0.937
  weight_decay: 0.0005
  
  patience: 5
  
  # Augmentation
  hsv_h: 0.015
  hsv_s: 0.7
  hsv_v: 0.4
  degrees: 0.0
  translate: 0.1
  scale: 0.5
  shear: 0.0
  perspective: 0.0
  flipud: 0.0
  fliplr: 0.5
  mosaic: 1.0
  mixup: 0.0

# Validation settings
val:
  batch: 32
  imgsz: 640
  save_json: false
  plots: true

# Logging settings
logging:
  project: "runs/train"
  name: "stage1_ttq_backbone_neck"
  save_period: 10
  verbose: true

# Other settings
resume: false
pretrained: true
